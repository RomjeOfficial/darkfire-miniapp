<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ö–æ—Å—Ç—ë—Ä —Ç—å–º—ã ‚Äî –ú–∏–Ω–∏-–∏–≥—Ä–∞</title>
  <style>
    body {
      background-color: #121212;
      color: #eee;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      padding: 40px;
      user-select: none;
      overflow: hidden;
      position: relative;
      height: 100vh;
    }
    #fire-container {
      position: relative;
      display: inline-block;
      font-size: 100px;
      margin: 40px 0;
      cursor: pointer;
    }
    #fire {
      animation: flicker 1.5s infinite alternate;
    }
    @keyframes flicker {
      0% { opacity: 1; }
      100% { opacity: 0.7; }
    }
    /* –ü—Ä–æ–≥—Ä–µ—Å—Å —É–¥–µ—Ä–∂–∞–Ω–∏—è */
    #hold-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 6px;
      background: #bb3300;
      width: 0%;
      border-radius: 0 0 10px 10px;
      transition: width 0.1s linear;
      pointer-events: none;
    }
    /* –ò—Å–∫—Ä—ã */
    .spark {
      position: absolute;
      width: 6px;
      height: 6px;
      background: radial-gradient(circle, #ffbb33 60%, transparent 100%);
      border-radius: 50%;
      opacity: 0;
      animation: sparkUp 1.2s linear forwards;
      pointer-events: none;
      filter: drop-shadow(0 0 3px #ffbb33);
    }
    @keyframes sparkUp {
      0% {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
      100% {
        transform: translateY(-40px) scale(0);
        opacity: 0;
      }
    }
    #status {
      font-size: 18px;
      margin-top: 20px;
      height: 24px;
    }
  </style>
</head>
<body>
  <h1>–ö–æ—Å—Ç—ë—Ä —Ç—å–º—ã</h1>
  <div id="fire-container" aria-label="–ö–æ—Å—Ç—ë—Ä" role="button" tabindex="0">
    <div id="fire">üî•</div>
    <div id="hold-progress"></div>
  </div>
  <p id="status">–ö–æ—Å—Ç—ë—Ä –Ω–µ –≥–æ—Ä–∏—Ç</p>

  <script>
    const fireContainer = document.getElementById('fire-container');
    const fireEl = document.getElementById('fire');
    const progressBar = document.getElementById('hold-progress');
    const statusEl = document.getElementById('status');

    let burning = false;
    let holdTimer;
    const holdDuration = 3000; // 3 —Å–µ–∫—É–Ω–¥—ã —É–¥–µ—Ä–∂–∞–Ω–∏—è
    let holdStartTime = null;
    let progressInterval;

    // –ò—Å–∫—Ä—ã
    let sparksInterval;
    const sparksCount = 6;

    function createSpark() {
      const spark = document.createElement('div');
      spark.className = 'spark';
      // –†–∞–Ω–¥–æ–º–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫–æ–ª–æ –∫–æ—Å—Ç—Ä–∞
      const x = (Math.random() - 0.5) * 80; // +-40px –æ—Ç —Ü–µ–Ω—Ç—Ä–∞
      const y = (Math.random() - 0.5) * 30; // +-15px
      spark.style.left = `calc(50% + ${x}px)`;
      spark.style.top = `calc(50% + ${y}px)`;
      spark.style.animationDuration = (0.8 + Math.random() * 0.8) + 's';
      fireContainer.appendChild(spark);

      // –£–¥–∞–ª—è–µ–º —Å–ø–∞—Ä–∫ –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
      spark.addEventListener('animationend', () => {
        spark.remove();
      });
    }

    function startSparksEffect() {
      if (sparksInterval) return;
      sparksInterval = setInterval(() => {
        for(let i=0; i<sparksCount; i++) {
          createSpark();
        }
      }, 400);
    }

    function stopSparksEffect() {
      clearInterval(sparksInterval);
      sparksInterval = null;
      // –£–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∏—Å–∫—Ä—ã
      document.querySelectorAll('.spark').forEach(s => s.remove());
    }

    function updateProgress() {
      if (!holdStartTime) return;
      const elapsed = Date.now() - holdStartTime;
      const percent = Math.min((elapsed / holdDuration) * 100, 100);
      progressBar.style.width = percent + '%';
    }

    function startHold() {
      if (burning) return;

      holdStartTime = Date.now();
      progressBar.style.width = '0%';
      progressInterval = setInterval(updateProgress, 50);
      startSparksEffect();

      // –í–∏–±—Ä–∞—Ü–∏—è 100 –º—Å –ø—Ä–∏ –Ω–∞—á–∞–ª–µ —É–¥–µ—Ä–∂–∞–Ω–∏—è
      if (navigator.vibrate) {
        navigator.vibrate(100);
      }

      holdTimer = setTimeout(() => {
        lightFire();
        clearInterval(progressInterval);
        progressBar.style.width = '0%';
        holdStartTime = null;
        stopSparksEffect();
      }, holdDuration);
    }

    function cancelHold() {
      clearTimeout(holdTimer);
      clearInterval(progressInterval);
      progressBar.style.width = '0%';
      holdStartTime = null;
      stopSparksEffect();
    }

    function lightFire() {
      burning = true;
      statusEl.textContent = '–ö–æ—Å—Ç—ë—Ä –≥–æ—Ä–∏—Ç 8 —á–∞—Å–æ–≤ üî•';
      fireEl.style.color = '#ff6600';
      fireEl.style.textShadow = '0 0 15px #ff6600, 0 0 30px #ff4400';

      // –ß–µ—Ä–µ–∑ 8 —á–∞—Å–æ–≤ –∫–æ—Å—Ç—ë—Ä —Ç—É—Ö–Ω–µ—Ç (–¥–ª—è —Ç–µ—Å—Ç–∞ –º–æ–∂–Ω–æ –º–µ–Ω—å—à–µ)
      setTimeout(() => {
        burning = false;
        statusEl.textContent = '–ö–æ—Å—Ç—ë—Ä –ø–æ—Ç—É—Ö. –ó–∞–∂–≥–∏ —Å–Ω–æ–≤–∞.';
        fireEl.style.color = '';
        fireEl.style.textShadow = '';
      }, 28800000);
    }

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è (–º—ã—à—å –∏ –∫–∞—Å–∞–Ω–∏–µ)
    fireContainer.addEventListener('mousedown', startHold);
    fireContainer.addEventListener('touchstart', startHold);

    fireContainer.addEventListener('mouseup', cancelHold);
    fireContainer.addEventListener('mouseleave', cancelHold);
    fireContainer.addEventListener('touchend', cancelHold);
    fireContainer.addEventListener('touchcancel', cancelHold);

  </script>
</body>
</html>
